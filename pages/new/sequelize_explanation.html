<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Como o Sequelize Funciona</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f9;
            color: #333;
        }
        header {
            text-align: center;
            padding: 20px;
            background-color: #007bff;
            color: white;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        h1, h2, h3 {
            color: #0056b3;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        pre {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
        code {
            font-family: 'Courier New', Courier, monospace;
            font-size: 14px;
        }
        ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        li {
            margin-bottom: 10px;
        }
        .section {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <header>
        <h1>Como o Sequelize Funciona</h1>
        <p>Entenda como o Sequelize gerencia bancos de dados sem escrever SQL</p>
    </header>
    <div class="container">
        <div class="section">
            <h2>O que é o Sequelize?</h2>
            <p>O <strong>Sequelize</strong> é um <em>Object-Relational Mapping (ORM)</em> para Node.js. Ele simplifica a interação com bancos de dados relacionais, como MySQL, PostgreSQL e SQLite, permitindo que você manipule dados usando objetos JavaScript em vez de escrever comandos SQL diretamente.</p>
            <p>Com o Sequelize, você define <strong>modelos</strong> que representam tabelas no banco de dados e usa métodos prontos para criar, ler, atualizar e excluir registros (operações CRUD).</p>
        </div>

        <div class="section">
            <h2>Como o Sequelize Funciona?</h2>
            <p>O Sequelize abstrai o SQL por meio de três componentes principais:</p>
            <ul>
                <li><strong>Conexão com o Banco de Dados</strong>: Configura a conexão com o banco (como no arquivo <code>database.js</code>).</li>
                <li><strong>Modelos</strong>: Define a estrutura das tabelas (campos, tipos de dados, relacionamentos).</li>
                <li><strong>Métodos CRUD</strong>: Fornece funções como <code>create</code>, <code>findAll</code>, <code>update</code> e <code>destroy</code> para manipular dados.</li>
            </ul>
            <p>Por exemplo, ao invés de escrever <code>INSERT INTO usuarios (nome, email) VALUES ('João', 'joao@email.com')</code>, você usa um método como <code>Usuario.create({ nome: 'João', email: 'joao@email.com' })</code>.</p>
        </div>

        <div class="section">
            <h2>Exemplo: Configuração do Sequelize com MySQL</h2>
            <p>O arquivo <code>database.js</code> abaixo configura a conexão com um banco de dados MySQL:</p>
            <pre><code>
// config/database.js - Configuração do Sequelize com MySQL

const { Sequelize } = require('sequelize');
const dotenv = require('dotenv');

// Carrega variáveis de ambiente
dotenv.config();
const HOST = process.env.MYSQL_HOST;
const USER = process.env.MYSQL_USER;
const PASS = process.env.MYSQL_PASS;
const PORT = process.env.MYSQL_PORT || 3307;
const DB = process.env.MYSQL_DB;

// Conexão com MySQL
const sequelize = new Sequelize({
    dialect: 'mysql',
    host: HOST, // Endereço do servidor MySQL
    database: DB, // Nome do banco de dados
    username: USER, // Usuário do MySQL
    password: PASS, // Senha do MySQL
    port: PORT, // Porta do MySQL
    logging: false, // Desliga logs para não poluir o console
});

module.exports = sequelize;
            </code></pre>
            <p><strong>Explicação do Código:</strong></p>
            <ul>
                <li><code>dotenv.config()</code>: Carrega variáveis de ambiente de um arquivo <code>.env</code> (ex.: <code>MYSQL_HOST=localhost</code>).</li>
                <li><code>Sequelize</code>: Cria uma conexão com o MySQL usando as credenciais fornecidas (host, usuário, senha, banco de dados, porta).</li>
                <li><code>dialect: 'mysql'</code>: Especifica que o banco de dados é MySQL.</li>
                <li><code>logging: false</code>: Desativa logs de SQL para manter o console limpo.</li>
            </ul>
        </div>

        <div class="section">
            <h2>Como o Sequelize Insere Dados Sem SQL?</h2>
            <p>O Sequelize usa <strong>modelos</strong> para representar tabelas. Por exemplo, um modelo <code>Usuario</code> pode ser definido assim:</p>
            <pre><code>
const { DataTypes } = require('sequelize');
const sequelize = require('./config/database');

const Usuario = sequelize.define('Usuario', {
    nome: { type: DataTypes.STRING, allowNull: false },
    email: { type: DataTypes.STRING, allowNull: false },
});

module.exports = Usuario;
            </code></pre>
            <p>Para inserir um novo usuário, você não escreve SQL. Em vez disso, usa o método <code>create</code>:</p>
            <pre><code>
async function criarUsuario() {
    await Usuario.create({ nome: 'João Silva', email: 'joao@email.com' });
}
            </code></pre>
            <p>O Sequelize converte isso automaticamente em um comando SQL como:</p>
            <pre><code>
INSERT INTO usuarios (nome, email, createdAt, updatedAt) 
VALUES ('João Silva', 'joao@email.com', NOW(), NOW());
            </code></pre>
            <p>Você não precisa escrever o SQL porque o Sequelize mapeia os objetos JavaScript para as tabelas do banco de dados e gera os comandos necessários internamente.</p>
        </div>

        <div class="section">
            <h2>Por que Usar o Sequelize?</h2>
            <ul>
                <li><strong>Simplicidade</strong>: Escreva menos código e evite SQL manual.</li>
                <li><strong>Segurança</strong>: O Sequelize previne injeções SQL ao usar parâmetros.</li>
                <li><strong>Flexibilidade</strong>: Suporta MySQL, PostgreSQL, SQLite, e outros.</li>
                <li><strong>Relacionamentos</strong>: Facilita a criação de associações entre tabelas (ex.: <code>belongsTo</code>, <code>hasMany</code>).</li>
            </ul>
        </div>

        <div class="section">
            <h2>Conclusão</h2>
            <p>O Sequelize simplifica a interação com bancos de dados ao transformar operações SQL em métodos JavaScript. O arquivo <code>database.js</code> estabelece a conexão, enquanto os modelos definem a estrutura dos dados. Com métodos como <code>create</code>, <code>findAll</code>, e <code>update</code>, você manipula dados sem escrever SQL diretamente, tornando o desenvolvimento mais rápido e seguro.</p>
        </div>
    </div>
</body>
</html>