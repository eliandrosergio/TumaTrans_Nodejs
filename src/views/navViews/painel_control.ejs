<div class="mb-4">
    <h2>Centro de Controle</h2>
    <p class="text-muted">Complexo Escolar Privado Tchiungo</p>
</div>
<hr>

<div class="mt-5 mb-3">
    <h4>Resumo Rápido</h4>
    <p class="text-muted">Visão geral do sistema</p>

    <div class="row g-3 mb-4">
        <div class="col-sm-6 col-lg-3">
            <div class="card bg-primary text-white h-100 resumo-card">
                <div class="card-body text-center d-flex flex-column justify-content-center">
                    <h3 id="totalAlunos" class="mb-2">-</h3>
                    <p class="mb-0 small">Total de Alunos</p>
                </div>
            </div>
        </div>
        <div class="col-sm-6 col-lg-3">
            <div class="card bg-success text-white h-100 resumo-card">
                <div class="card-body text-center d-flex flex-column justify-content-center">
                    <h3 id="totalMotoristas" class="mb-2">-</h3>
                    <p class="mb-0 small">Total de Motoristas</p>
                </div>
            </div>
        </div>
        <div class="col-sm-6 col-lg-3">
            <div class="card bg-secondary text-white h-100 resumo-card">
                <div class="card-body text-center d-flex flex-column justify-content-center">
                    <h3 id="totalVeiculos" class="mb-2">-</h3>
                    <p class="mb-0 small">Total de Veículos</p>
                </div>
            </div>
        </div>
        <div class="col-sm-6 col-lg-3">
            <div class="card bg-info text-white h-100 resumo-card">
                <div class="card-body text-center d-flex flex-column justify-content-center">
                    <h3 id="totalRotas" class="mb-2">-</h3>
                    <p class="mb-0 small">Total de Rotas</p>
                </div>
            </div>
        </div>
    </div>
</div>
<hr>

<div class="row g-3">
    <div class="col-md-4">
        <div class="card h-100">
            <div class="card-body p-4">
                <h5 class="mb-3">Alunos</h5>
                <p class="text-muted mb-4">Gestão de estudantes</p>
                <div class="d-grid gap-2">
                    <a class="btn btn-primary" href="#" onclick="navigateWithToken(event, '/api/alunos/ver')">
                        Ver Lista
                    </a>
                    <a class="btn btn-outline-primary" href="#" onclick="navigateWithToken(event, '/api/alunos/cadastro')">
                        Cadastrar
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card h-100">
            <div class="card-body p-4">
                <h5 class="mb-3">Motoristas</h5>
                <p class="text-muted mb-4">Gestão de condutores</p>
                <div class="d-grid gap-2">
                    <a class="btn btn-primary" href="#" onclick="navigateWithToken(event, '/api/motoristas/ver')">
                        Ver Lista
                    </a>
                    <a class="btn btn-outline-primary" href="#" onclick="navigateWithToken(event, '/api/motoristas/cadastro')">
                        Cadastrar
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card h-100">
            <div class="card-body p-4">
                <h5 class="mb-3">Veículos</h5>
                <p class="text-muted mb-4">Gestão da frota</p>
                <div class="d-grid gap-2">
                    <a class="btn btn-primary" href="#" onclick="navigateWithToken(event, '/api/veiculos/ver')">
                        Ver Lista
                    </a>
                    <a class="btn btn-outline-primary" href="#" onclick="navigateWithToken(event, '/api/veiculos/cadastro')">
                        Cadastrar
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card h-100">
            <div class="card-body p-4">
                <h5 class="mb-3">Rotas</h5>
                <p class="text-muted mb-4">Gestão de trajetos</p>
                <div class="d-grid gap-2">
                    <a class="btn btn-primary" href="#" onclick="navigateWithToken(event, '/api/rotas/ver')">
                        Ver Lista
                    </a>
                    <a class="btn btn-outline-primary" href="#" onclick="navigateWithToken(event, '/api/rotas/cadastro')">
                        Cadastrar
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card h-100">
            <div class="card-body p-4">
                <h5 class="mb-3">Usuários</h5>
                <p class="text-muted mb-4">Gestão de contas de acesso</p>
                <div class="d-grid gap-2">
                    <a class="btn btn-primary" href="#" onclick="navigateWithToken(event, '/api/usuarios/ver')">
                        Ver Lista
                    </a>
                    <a class="btn btn-outline-primary" href="#" onclick="navigateWithToken(event, '/api/usuarios/cadastro')">
                        Cadastrar
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card h-100">
            <div class="card-body p-4">
                <h5 class="mb-3">Relatórios</h5>
                <p class="text-muted mb-4">Visualizar dados e estatísticas</p>
                <div class="d-grid gap-2">
                    <a class="btn btn-primary" href="#" onclick="navigateWithToken(event, '/api/relatorios/ver')">
                        Ver Relatórios
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Carregar estatísticas do dashboard
        async function carregarEstatisticas() {
            const token = localStorage.getItem('token');
            try {
                const response = await fetch('/api/relatorios/dashboard', {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                const stats = await response.json();
                
                document.getElementById('totalAlunos').textContent = stats.totalAlunos || 0;
                document.getElementById('totalMotoristas').textContent = stats.totalMotoristas || 0;
                document.getElementById('totalVeiculos').textContent = stats.totalVeiculos || 0;
                document.getElementById('totalRotas').textContent = stats.totalRotas || 0;
            } catch (err) {
                console.error('Erro ao carregar estatísticas:', err);
            }
        }
        
        document.addEventListener('DOMContentLoaded', carregarEstatisticas);
    </script>
</div>
